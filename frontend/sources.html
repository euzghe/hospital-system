<!DOCTYPE html><html lang="tr"><head>
  <meta charset="UTF-8"><title>Sources</title>
  <style>
    body{font-family:Arial,sans-serif;padding:24px;background:#f7fafc}
    header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
    .card{background:#fff;padding:16px;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,.08)}
    table{width:100%;border-collapse:collapse;margin-top:12px}
    th,td{border-bottom:1px solid #eee;padding:10px;text-align:left}
    .badge{padding:2px 8px;border-radius:999px;font-size:12px}
    .on{background:#dcfce7;color:#166534}
    .off{background:#fee2e2;color:#991b1b}
    button{padding:8px 10px;border:none;border-radius:8px;cursor:pointer;background:#1d4ed8;color:#fff}
    .ghost{background:#f1f5f9;color:#111827}
  </style></head><body>
<script>const BASE_URL="http://localhost:8080";</script>
<header>
  <h2>Kaynak Durumları</h2>
  <div>
    <button class="ghost" onclick="location.href='or.html'">OR Router</button>
    <button class="ghost" onclick="location.href='admin.html'">Admin</button>
  </div>
</header>

<div class="card">
  <table>
    <thead><tr><th>ID</th><th>Ad</th><th>URL</th><th>Durum</th><th>İşlem</th></tr></thead>
    <tbody id="rows"></tbody>
  </table>
</div>

<script>
  function load(){
    fetch(`${BASE_URL}/or/sources`).then(r=>r.json()).then(list=>{
      const tb=document.getElementById('rows'); tb.innerHTML='';
      list.forEach(s=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${s.id}</td><td>${s.name}</td><td>${s.url}</td>
          <td><span class="badge ${s.online?'on':'off'}">${s.online?'online':'offline'}</span></td>
          <td><button onclick="toggle(${s.id},${!s.online})">${s.online?'Offline Yap':'Online Yap'}</button></td>`;
        tb.appendChild(tr);
      });
    });
  }
  function toggle(id,online){
    fetch(`${BASE_URL}/sources/${id}/status`,{method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({online})})
      .then(()=>load());
  }
  load();
</script>
</body></html>
